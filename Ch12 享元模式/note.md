# 命令模式

## 描述

享元模式，其英文名为 Flyweight（蝇量级拳击手），用灵活多变的少量对象来取代大量的相似对象。（个人理解，享元就是可以用来共享的对象元素。）

为了实现这个目的，需要对大量相似对象进行分析，把相同和不同的属性区分开来，相同的称之为**内部状态**，不同的称之为**外部状态**。内部状态就存储于享元的内部，外部状态由享元所处的场景来决定。

## 适用条件

* 一个程序中使用了大量的对象
* 由于使用大量的对象，造成很大的内存开销
* 对象的大多数状态都可以转变为外部状态
* 剥离出对象的外部状态后，可以用相对较少的共享对象取代大量对象

## 在JS中的实现

1. 对大量类进行内部状态和外部状态的分离，形成新的类（享元）
2. 利用工厂函数对享元进行管理
3. 利用管理器对外部状态进行管理
4. 使用

## 个人理解

享元模式本质上是一种用时间换空间的办法，也就是用计算时间来换取内存空间。这在一定的**适用条件**下是成立的。

在实际应用中，如果不小心遇到了对象爆炸的问题，那就可以考虑使用享元来改善性能表现。

在《设计模式》一书中，举的例子是文本编辑器，用享元来存储有限的字符，而字符的位置、颜色、大小则是外部状态。

这让我想到了老式游戏机中的图形处理办法，背景通常采用tile来绘制，这个tile通常是16*16像素的方形图块，内容非常简单，数量也不多。
但是可以通过tile的不同组合，生成各种各样的背景。
这里的tile就可以认为是享元，而tile出现的位置就可以认为是外部状态。
