# 代理模式

## 定义

为对象提供一个代理，以便控制对这个对象的访问。

当客户不便直接访问一个对象或者不满足需要的时候，提供一个替身对象来控制对目标对象的访问，客户实际上访问的是替身对象。

代理模式分两类。

* 保护代理

    代理可以帮助对象过滤掉一些请求，以保护对象代码的安全。（在JS中不易实现，不太常用）

* 虚拟代理

    虚拟代理把一些开销很大的对象，延迟到真正使用的时候再创建。

* 缓存代理

    为实际对象的计算结果提供缓存，在缓存命中时，直接返回计算结果。

## Javascript中的实现

所谓的代理模式，实际就是为目标对象提供一个外壳，通过在这个壳上增加一些机制，来提高系统的性能或效率，这个外壳就是代理。

为了保证外壳的可用性，代理的接口应当与目标对象完全一致。这样才能让使用者透明的使用，也能随时修改、添加、取消代理。

具体到JS中的实现，最通用的办法，就是实现一个和目标对象接口一致的对象，同时在这个对象上提供一些新特性。

就如本章最后所讲的那样，在实际编码过程中，不用预先猜测是否要使用代理，而是发现不方便的时候，再编写代理。（这不就是惰性操作么？）

```
         访问者
           |
    +--------------+
    |    代理对象   |
    +--------------+
           | 
    +--------------+
    |    目标对象   |
    +--------------+
    
```