# 迭代器模式

## 定义

提供一种方法顺序访问一个聚合对象中的各个元素，而又不需要暴露该对象的内部表示。

* 内部迭代器

    迭代过程是全自动的。对聚合对象中的每个元素应用特定函数的方法。只需设定需要执行的方法即可开始迭代过程。

* 外部迭代器

    迭代过程是半自动的。迭代器可以按照预定顺序逐个返回元素，但是需要显式的请求下一个元素，迭代才能继续。一般都是 next()方法。

    外部迭代器使用起来比较麻烦，但是更加灵活，可以满足特殊需求（例如同时迭代多个数组）。需要手工实现。

## Javascript中的实现

JS本身已经实现了内部迭代器，对数组和对象提供了两种不同的迭代方法， forEach(fn) 和 for(var attr in obj){} 。

同时，jQuery 也实现了自己的迭代器 $.each()，可以同时对数组和对象进行迭代。

此外，除了正常的按顺序迭代，也可以实现倒序、中序等。

## 迭代器和for循环有什么差异？

对于数组对象，forEach更像是for循环的语法糖，使用的时候感觉不到什么差异。

但是对于复杂对象，提供一个迭代器（内部或外部）则比较合适。调用者不需要了解对象的内部构造，直接使用迭代器即可。
例如，实时数据库的测点集合对象，就可以提供一个迭代器用于数据更新。
