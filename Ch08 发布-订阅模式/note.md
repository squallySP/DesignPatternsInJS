# 发布-订阅模式

## 定义

发布-订阅模式又叫观察者模式，它定义对象间的一种一对多的依赖关系，当一个对象的状态发生改变时，所有依赖于它的对象都将得到通知。


## Javascript中的实现

在JS中，一般用事件模型来替代传统的发布-订阅模式。在DOM操作中常用的 addEventListener 就是事件的应用。

'发布订阅对象'一般需要具备几个方法： 
* addListener（订阅），
* removeListener（取消订阅），
* trigger（发布事件）。

事件一般由 事件名（字符串）和 事件（对象）组成。

发布者使用trigger方法来发布事件。
订阅者通过 addListener 和 removeListener 添加或取消订阅。

'发布订阅对象'可以是发布者，也可以独立于发布者。后者的情况下，'发布订阅对象'就成为“事件中心”，实现事件的集中与分发。

```
    发布者1   发布者2   发布者3  ...
       \       |       /
        \      |      /
        +-------------+
        | 发布-订阅对象 |
        +-------------+
        /      |      \
       /       |       \
    订阅者1   订阅者2   订阅者3  ...
```

## 思考

JS语言的最初就是用来和HTML搭配使用的，因为用于UI构建，所以回调和消息（事件）机制是少不了的。再加上JS的函数式语言特性，在实现发布订阅的时候比较方便。

通过这一章节的学习，也可以对DOM和Vue.js中的事件机制有了更多认识。联想到Qt，其中的 信号和槽 机制，应该也是发布订阅模式的一种实现。